<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>HID Product slution app</title>

        <meta name="format-detection" content="telephone=no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi" />

    <link rel="stylesheet" href="css/plugins.css"/>
    <link rel="stylesheet" href="lib/onsen/css/onsenui.css">  
    <link rel="stylesheet" href="lib/onsen/css/onsen-css-components.css">  
    <link rel="stylesheet" href="css/app.css"/>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/hid.css">

    </head>
    <body>



        <section class="container product-info">
      

            <header>
                <ons-page>
                <ons-toolbar modifier="opacity">
                <div class="left">
                  <ons-back-button></ons-back-button>
                    </div>
                  <div class="center"><a href="index.html"><img src="img/brick.png"</div>
              </div>
                </ons-toolbar>
            </header>


            <p id="next_swiper"> <img src="img/arrow-right.png" alt="" /> </p>
            <p id="previous_swiper" style="display:none;"> <img src="img/arrow-left.png" alt="" /> </p>


            <div class="swiper-container product-slider" ng-controller="pluginsController">
              <div class="swiper-wrapper">
                <!-- Content to be inserted here dynamically -->

                
              </div>
            </div>

            <ons-button modifier="large--cta" ng-click="openSocialSharing()">Share Datasheet</ons-button>

            <footer>
                <p>&reg; 2015 HID Global. All rights reserved.</p>
            </footer>

            <div class="">
       <img src="img/bg.png" class="bg">
      </div>


        </section>


        <!-- jquery -->
        <script src="js/vendor/jquery-1.10.2.min.js"></script>
        <!-- slider library -->
        <script src="js/vendor/idangerous.swiper.min.js"></script>
        <!-- fastclick -->
        <script type='application/javascript' src='js/vendor/fastclick.js'></script>
        <!-- papa parse -->
        <script type='application/javascript' src='js/vendor/papaparse.min.js'></script>
        <!-- Cookie plugin -->
        <script type='application/javascript' src='js/vendor/jquery.cookie.js'></script>

        <!-- plugin and custom js code -->
        <script src="js/main.js"></script>

        <!-- custom javascript controllers -->
          <script src="lib/onsen/js/angular/angular.js"></script>    
          <script src="lib/onsen/js/angular/angular-touch.js"></script>    
          <script src="lib/onsen/js/onsenui.js"></script>    
          <script src="js/jquery.min.js"></script>   
          <script src="js/plugins.js"></script>    
          <script src="cordova.js"></script>     
          <script src="js/core.js"></script>
          <script src="js/SocialSharing.js"></script>
          <script src="js/email_composer.js"></script>

        <!-- page specific logic -->
        <script type="text/javascript">
            $(document).ready(function() {

              //store hash value for querying json array
              window.hashvalue = location.hash.substr(1);

              paparesults(window.jsonproductsarray);


              //setup callback method for when papa parse is finished
              function paparesults(results){
                    
                    //run through json array and dump all the elements for the slider
                    $.each( results, function( key, value ) {
                        if( value['vertical'] == $.cookie('verticalcategory') ){
                            $('.swiper-wrapper').append('<div class="swiper-slide"> <div class="product-slide"> <h1>'+ value['name'] +'</h1> <img src="product-images/'+ value['imagefilename'] +'" alt=""  /> <p>'+ value['description'] +'</p> <div class="datasheet-download-btn"><a href="form.html#'+ value['pdf'] +'" title="">Download datasheet</a></div> </div> </div>'
                            );                             
                        }
                    });               

                    //once we've run through the csv entries and added them to the dom, finally call and enable the swiper
                    window.mySwiper = $('.product-slider').swiper({
                        mode:'horizontal',
                        loop: false,
                        onSlideChangeEnd: function () {
                              $('#next_swiper').show();
                              $('#previous_swiper').show();
                              if(window.mySwiper.activeIndex==0){
                                    $('#previous_swiper').hide()
                              }
                              if(window.mySwiper.activeIndex==window.mySwiper.slides.length-1){
                                    $('#next_swiper').hide()
                              }
                        }
                    });

                    //once the slider is setup move to the previously selected product via it's index.
                    window.mySwiper.swipeTo($.cookie('productIndexSelected'), 10, true);



              }//closing paparesults




            }); 
        </script>


       

    </body>
</html>
